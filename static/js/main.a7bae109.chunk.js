(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{29:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(10),c=n.n(r),s=(n(27),n(28),n(29),n(4)),i=n(5),l=n(7),h=n(6),u=n(0),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={name:""},e.handleNameChange=function(t){e.setState({name:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.name.trim()?e.props.onSubmit(e.state.name):window.alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441")},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{value:this.state.name,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"search",onChange:this.handleNameChange})]})})}}]),n}(a.Component),b=n(13),d=n(22),g=n.n(d),j=n(12),p=n.n(j),f=function(){function e(){Object(s.a)(this,e),this.base_url="https://pixabay.com/api/",this.api_key="21301375-7d22153b76338a293f3dc129f",this._name="",this._page=1}return Object(i.a)(e,[{key:"name",get:function(){return this._name},set:function(e){return this._name=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page=e}},{key:"searchPhotos",value:function(){p.a.defaults.baseURL=this.base_url;var e="?key=".concat(this.api_key,"&q=").concat(this.name,"&page=").concat(this.page,"&per_page=12&image_type=photo&orientation=horizontalv");return console.log(this.page,this.name),p.a.get(e).then((function(e){return e.data})).then((function(e){return e.hits})).catch((function(e){console.log(e)}))}}]),e}();function O(e){var t=e.getBigPhoto,n=e.photo,a=e.alt,o=e.photoLage;return Object(u.jsx)("li",{className:"ImageGalleryItem",children:Object(u.jsx)("img",{onClick:function(){return t(o,a)},src:n,alt:a,className:"ImageGalleryItem-image"})})}function y(e){var t=e.handleClick;return Object(u.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})}var v=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(u.jsx)("div",{className:"Overlay",onClick:this.props.onClose,children:Object(u.jsx)("div",{className:"Modal",children:this.props.children})}),document.getElementById("modalRoot"))}}]),n}(a.Component),w=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={gallery:[],status:"init",showModal:!1},e.newPixabayFetchObj=new f,e.handleClick=function(){e.newPixabayFetchObj.page+=1,e.newPixabayFetchObj.searchPhotos().then((function(t){e.setState((function(e){return{gallery:[].concat(Object(b.a)(e.gallery),Object(b.a)(t)),status:"success"}}))})).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(t){e.setState({status:"error"})}))},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.getBigPhoto=function(t,n){localStorage.setItem("url",JSON.stringify(t)),localStorage.setItem("alt",JSON.stringify(n)),e.toggleModal()},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;e.name!==this.props.name&&(this.setState({status:"pending"}),this.newPixabayFetchObj.name=this.props.name,this.newPixabayFetchObj.page=1,this.newPixabayFetchObj.searchPhotos().then((function(e){if(n.setState({gallery:e,status:"success"}),0===n.state.gallery.length)return n.setState({status:"error"})})).catch((function(e){n.setState({status:"error"})})))}},{key:"render",value:function(){var e=this.state,t=e.gallery,n=e.showModal,a=e.status,o=this.toggleModal,r=this.getBigPhoto,c=this.handleClick;return"init"===a?Object(u.jsx)("h1",{children:"Hello! Search something...."}):"pending"===a?Object(u.jsx)(g.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}):"success"===a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:t.length>0&&t.map((function(e){return Object(u.jsx)(O,{getBigPhoto:r,photo:e.webformatURL,photoLage:e.largeImageURL,alt:e.tags},e.id)}))}),Object(u.jsx)(y,{className:"BtnMore",handleClick:function(){c()}}),n&&Object(u.jsx)(v,{onClose:o,children:Object(u.jsx)("img",{src:JSON.parse(localStorage.getItem("url")),alt:localStorage.getItem("alt")})})]}):"error"===a?Object(u.jsx)("h2",{children:"No results were found for your search."}):void 0}}]),n}(a.Component),x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={name:""},e.handleFormSubmit=function(t){e.setState({name:t})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{onSubmit:this.handleFormSubmit}),Object(u.jsx)(w,{name:this.state.name})]})}}]),n}(a.Component),S=x;c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.a7bae109.chunk.js.map